# Progress Log - 2026-02-04

## ‚úÖ Completed Tasks
- **Project Structure**: Initialized `backend` (FastAPI) and `frontend` (React + Vite).
- **Authentication**: Integrated **Google OAuth 2.0** (Login, Logout, Switch Account).
- **Core Feature**: Implemented `Drive to PDF` conversion (Scan folder -> Download images -> Create PDF).
- **UI/UX**: 
    - Built a modern, Glassmorphism-style interface with Tailwind CSS.
    - Added **Authentication Flow** (Login/Logout buttons).
    - Added **Progress Bar** visualized via Server-Sent Events (SSE).
    - Added **Cancel/Stop** button to interrupt processing securely.
    - Implemented Error Handling & Timeout alerts.
- **Advanced OCR Pipeline**:
    - Integrated **Gemini 3 Flash Preview** (Paid Tier support).
    - **Max Parallelism**: Implemented dynamic scaling up to **100 concurrent batches** (1 image per batch).
    - **Natural Sort**: Fixed image ordering logic (Page 1 -> Page 2 -> Page 10).
    - **Seamless Text**: Optimized Prompt for joining words across lines and removing arbitrary line breaks.
    - **Chapter Deduplication**: Logic to merge chapters with similar titles (case-insensitive & space-insensitive).
    - **Data Management**: Switch from generic ZIP to **Timestamped Folders** (`results/ocr_YYYYMMDD_HHMMSS/`) containing individual `.txt` files.
    - **Local Testing**: Created `test_pipeline_local.py` for faster iteration without Drive downloads.

## üêõ Issues / Challenges
- **API Key Leak**: hardcoded key in test script detected by Google and disabled. **Fixed** by moving to `.env` and updating `.gitignore`.
- **Gemini Rate Limits**: Fixed by implementing retry logic and matching concurrency to subscription tier.
- **Image Sorting**: Page numbers in file names were causing sequential errors; solved by **Natural Sort** logic.
- **Chapter Overlap**: Multiple detections of the same chapter title caused split files; solved by **Deduplication logic**.

## üîú Next Steps
- **EPUB Export**: Implement conversion from extracted text to EPUB.
- **UI Refinement**: Show the timestamped folder name in the Frontend completion message.
- **Cloud Deployment**: Create Docker configuration for production.
